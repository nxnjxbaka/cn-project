<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simplest Sliding Window Protocol Simulator</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>Simplest Sliding Window Protocol Simulator (With Errors)</h1>

      <div class="top-buttons">
        <button onclick="openPopup('learnPopup')">Learn</button>
        <button onclick="openPopup('devPopup')">Developed By</button>
        <button onclick="openPopup('helpPopup')">Help</button>
        <button onclick="downloadResults()">Download</button>
      </div>
    </header>

    <div class="container">
      <h2>Input Parameters</h2>
      <form id="simForm">
        <label>Number of Frames (N):</label>
        <input type="number" id="numFrames" min="1" value="5" /><br />

        <label>Window Size (W):</label>
        <input type="number" id="winSize" min="1" value="1" /><br />

        <label>Time per Frame (units):</label>
        <input type="number" id="timePerFrame" min="1" value="2" /><br />

        <label>Show Step Animation:</label>
        <input type="checkbox" id="animate" checked /><br />

        <label>Error Type:</label>
        <select id="errorType">
          <option value="none">No Error (Noiseless)</option>
          <option value="ack_lost">ACK Not Received</option>
          <option value="feedback_lost">Feedback Not Received</option>
          <option value="ack_timeout">ACK Timeout</option>
        </select><br />

        <button type="button" onclick="runSimulation()">Simulate</button>
      </form>

      <h2>Timeline Diagram</h2>
      <canvas id="timeline" width="1000" height="400"></canvas>

      <div class="stats">
        <h2>Summary Statistics</h2>
        <table>
          <tr><th>Metric</th><th>Value</th></tr>
          <tr><td>Total Frames Transmitted</td><td id="framesTx"></td></tr>
          <tr><td>Total ACKs Sent</td><td id="acksTx"></td></tr>
          <tr><td>Total Time Units</td><td id="totalTime"></td></tr>
          <tr><td>Efficiency</td><td id="efficiency"></td></tr>
        </table>
      </div>
    </div>

    <!-- POPUPS -->
    <div id="learnPopup" class="popup">
      <div class="popup-content">
        <span class="close" onclick="closePopup('learnPopup')">&times;</span>
        <h2>Learn</h2>
        <p>Materials related to Sliding Window Protocol will be added here.</p>
        <p>Textbook reference, explanation, and diagrams can be included later.</p>
      </div>
    </div>

    <div id="devPopup" class="popup">
      <div class="popup-content">
        <span class="close" onclick="closePopup('devPopup')">&times;</span>
        <h2>Developed By</h2>
        <p><strong>Name:</strong> NIranjan Kumar</p>
        <p><strong>Reg No:</strong> 24BCE1769</p>
      </div>
    </div>

    <div id="helpPopup" class="popup">
      <div class="popup-content">
        <span class="close" onclick="closePopup('helpPopup')">&times;</span>
        <h2>Help</h2>
        <p>1. Enter the number of frames and window size.</p>
        <p>2. Choose error type if needed.</p>
        <p>3. Click "Simulate" to see the timeline.</p>
        <p>4. Summary stats shown at the bottom.</p>
        <p>5. Use "Download" to save results.</p>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
